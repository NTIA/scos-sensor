{% extends "rest_framework/base.html" %}
{% load rest_framework %}
{% load sensor_tags %}

{% block title %} SCOS Sensor {% endblock %}

{% block branding %}
  <span>
    <a href="" ref="nofollow" class="navbar-brand">
      SCOS Sensor <span class="version">{% sensor_version_string %}</span>
    </a>
  </span>
{% endblock %}

{% block userlinks %}
  {% if user.is_authenticated %}
    {% if user.is_staff %}
      <li><a href={% url "admin:index" %}>Configuration</a></li>
    {% endif %}
    {% if AUTHENTICATION == "OAUTH" %}
    <!-- https://github.com/encode/django-rest-framework/blob/d635bc9c71b6cf84d137a68610ae2e628f8b62b3/rest_framework/templatetags/rest_framework.py -->
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            {{ user }}
            <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
            <li><a href={% url 'oauth-logout' %}?next={{ request.path }}>Log out</a></li>
        </ul>
    </li>
    {% else %}
      {% optional_logout request user %}
    {% endif %}
  {% else %}
    {% if AUTHENTICATION == "OAUTH" %}
      <li><a href={% url 'oauth-login' %}>Log in</a></li>
    {% else %}
      {% optional_login request %}
    {% endif %}
  {% endif %}
{% endblock %}
